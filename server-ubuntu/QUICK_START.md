# üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ IPA Server

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js 18+** –∏ npm
- **Ubuntu 20.04/22.04/24.04** (–∏–ª–∏ Windows –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **Gemini API –∫–ª—é—á** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É —Å–µ—Ä–≤–µ—Ä–∞
```bash
cd server-ubuntu
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª .env
nano .env
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ .env:**
```env
NODE_ENV=production
PORT=3001

# –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –Ω–∞ https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_actual_api_key_here

LOG_LEVEL=info
```

## üéØ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ —Å Gemini API (–ø–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ .env —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –∫–ª—é—á
npm start
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ Gemini API
```bash
# –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ API –∫–ª—é—á–∞, —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
npm run test
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
npm run dev
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞
```bash
curl http://localhost:3001/api/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "OK",
  "timestamp": "2025-08-07T21:37:03.810Z",
  "uptime": 28.0429617
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ API —Å—Ç–∞—Ç–µ–π
```bash
# –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π
curl http://localhost:3001/api/articles

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl http://localhost:3001/api/stats
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞
```bash
# Ubuntu/Linux
sudo netstat -tulpn | grep :3001

# Windows
netstat -ano | findstr :3001
```

## üîç –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –í—Å–µ –ª–æ–≥–∏
tail -f logs/combined.log

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
tail -f logs/error.log

# API –∑–∞–ø—Ä–æ—Å—ã
tail -f logs/api.log
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–ø–æ–∫
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–∞–ø–∫–∏ —Å–æ–∑–¥–∞–Ω—ã
ls -la logs/
ls -la databases/
```

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "GEMINI_API_KEY environment variable not set"
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `server-ubuntu/`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `npm run test`

### –ü—Ä–æ–±–ª–µ–º–∞: "Port 3001 is already in use"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å
sudo netstat -tulpn | grep :3001

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
sudo kill -9 <PID>

# –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –≤ .env
PORT=3002
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Module not found"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf node_modules package-lock.json
npm install
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –ü—Ä–æ—Ü–µ—Å—Å—ã Node.js
ps aux | grep node

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
sudo netstat -tulpn | grep :3001

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f logs/combined.log
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏
curl -X POST http://localhost:3001/api/articles \
  -H "Content-Type: application/json" \
  -d '{"filename":"test.md","content":"# Test Article\n\nThis is a test."}'

# –ß—Ç–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
curl http://localhost:3001/api/articles/test.md

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
curl -X DELETE http://localhost:3001/api/articles/test.md
```

## üöÄ –ü—Ä–æ–¥–∞–∫—à–Ω –∑–∞–ø—É—Å–∫

### –ß–µ—Ä–µ–∑ systemd (Ubuntu)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å
sudo ./install.sh

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º
sudo systemctl start ipa-server
sudo systemctl status ipa-server
sudo systemctl stop ipa-server
```

### –ß–µ—Ä–µ–∑ PM2
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
npm install -g pm2

# –ó–∞–ø—É—Å–∫
pm2 start server.js --name "ipa-server"

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
pm2 status
pm2 logs ipa-server
pm2 restart ipa-server
pm2 stop ipa-server
```

## üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤

### Web Client
```bash
# –í –¥—Ä—É–≥–æ–π –ø–∞–ø–∫–µ
cd ../client-web
npm install
npm run dev
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3002
```

### Console Client
```bash
# –í –¥—Ä—É–≥–æ–π –ø–∞–ø–∫–µ
cd ../client-ubuntu
npm install
node client.js
```

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 3001
sudo kill -9 $(sudo lsof -t -i:3001)

# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
rm -rf logs/*

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–∞–ø–æ–∫
du -sh logs/ databases/

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
watch -n 1 'curl -s http://localhost:3001/api/health'
```

## üÜò –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

- üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `README.md`
- üîß **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫:** `TROUBLESHOOTING.md`
- üìã **–õ–æ–≥–∏:** –ø–∞–ø–∫–∞ `logs/`
- üêõ **–û—Ç–ª–∞–¥–∫–∞:** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞
